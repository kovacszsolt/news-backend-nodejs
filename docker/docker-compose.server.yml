version: "3"
services:
  mongo:
    image: mongo:latest
    environment:
    - MONGO_DATA_DIR=/data/db
    volumes:
    - .data/db:/data/db
    command: mongod --smallfiles
  web:
    image: itcrowd-server:latest
    restart: "on-failure"
    volumes:
    - .data/images:/home/node/app/_public/images
    ports:
    - 8090:8090
    depends_on:
    - mongo
    environment:
      PORT: "8090"
      MONGOSERVER: "mongodb://mongo:27017/itcrowd"
      ALLOWORIGIN: "*"
      TWITTERCONSUMERKEY: "twitterconsumerkey"
      TWITTERCONSUMERSECRET: "twitterconsumersecret"
      TWITTERACCESSTOKENKEY: "twitteraccesstokenkey"
      TWITTERACCESSTOKENSECRET: "twitteraccesstokensecret"
      TWITTERSCREENNAME: "smithzsolt"
      ROOT_PATH: "/home/node/app"
      DEFAULT_IMAGE: "/twitter/image/default.jpg"
      IMAGE_STORE: "/_public/images"
      TWITTEREXCEPTION: "[]"